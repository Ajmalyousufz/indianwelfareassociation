<!DOCTYPE html>
<html lang="en">

<head>
  <title>Welfare - Free Bootstrap 4 Template by Colorlib</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css?family=Dosis:200,300,400,500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Overpass:300,400,400i,600,700" rel="stylesheet">

  <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
  <link rel="stylesheet" href="css/animate.css">

  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/magnific-popup.css">

  <link rel="stylesheet" href="css/aos.css">

  <link rel="stylesheet" href="css/ionicons.min.css">

  <link rel="stylesheet" href="css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="css/jquery.timepicker.css">


  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/icomoon.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Override .ftco-animate to ensure visibility for testing */
    .ftco-animate {
      opacity: 1 !important;
      visibility: visible !important;
    }
  </style>
</head>

<body>

  <nav id="navbar-placeholder"></nav>
  <!-- END nav -->

  <div class="hero-wrap" style="background-image: url('images/bg_2.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text align-items-center justify-content-center" data-scrollax-parent="true">
        <div class="col-md-7 ftco-animate text-center" data-scrollax=" properties: { translateY: '70%' }">
          <p class="breadcrumbs" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }"><span class="mr-2"><a
                href="index.html">Home</a></span> <span>Blog</span></p>
          <h1 class="mb-3 bread" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }">Blog</h1>
        </div>
      </div>
    </div>
  </div>


  <section class="ftco-section">
    <div class="container">
      <div class="row d-flex">
        <div class="row" id="blog-container"></div>
      </div>
      <div class="row mt-5">
        <div class="col text-center">
          <div class="block-27">
            <ul>
              <li><a href="#">&lt;</a></li>
              <li class="active"><span>1</span></li>
              <li><a href="#">2</a></li>
              <li><a href="#">3</a></li>
              <li><a href="#">4</a></li>
              <li><a href="#">5</a></li>
              <li><a href="#">&gt;</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>


  <div id="footbar-placeholder"></div>

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
      <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
      <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
        stroke="#F96D00" />
    </svg></div>

  <!-- Script to Load Navbar -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Load navbar.html into the navbar-placeholder div
      fetch("navbar.html")
        .then(response => response.text())
        .then(data => {
          document.getElementById("navbar-placeholder").innerHTML = data;
          // Fetch JSON data from projects.json
          fetch('programproject.json')
            .then(response => response.json())
            .then(data => {
              const container = document.getElementById('programmes-container');
              // Add "All Programmes" link
              let allProgrammesHTML = `<li><a href="causes.html" style="color: #fff;">All Programmes</a><ul class="submenu2">`;
              container.innerHTML += allProgrammesHTML; // Add it to the container

              data.Programmes.forEach(programme => {

                console.log(`program name : ${programme.name}`);
                let programmeHTML = `<li><a style="color: #fff;"> ${programme.name}</a><ul class="submenu2">`;
                programme.projects.forEach(project => {

                  const programmeParam = encodeURIComponent(programme.name);
                  const projectParam = encodeURIComponent(project.name);
                  const projectLink = `projects.html?programme=${programmeParam}&project=${projectParam}`;


                  console.log(`project name : ${project.name}`);
                  // Add each project link with URL parameters
                  programmeHTML += `<li><a href="${projectLink}" style="color: #fff;">${project.name}</a></li>`;
                });

                programmeHTML += `</ul></li>`;
                container.innerHTML += programmeHTML;
              });
            })
            .catch(error => {
              console.error('Error fetching the JSON data:', error);
            });

          // Toggle display of the dropdown menu on "Programmes" click
          document.getElementById('programmes-toggle').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent default link behavior

            const dropdownMenu = document.getElementById('programmes-dropdown');

            // Toggle display
            if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
              dropdownMenu.style.display = 'block';
            } else {
              dropdownMenu.style.display = 'none';
            }
          });
        })
        .catch(error => console.error("Error loading navbar:", error));
      fetch("footbar.html")
        .then(response => response.text())
        .then(data => {
          document.getElementById("footbar-placeholder").innerHTML = data;
          fetch('blog_json.json')
            .then(response => response.json())
            .then(data => {
              console.log(data);  // Check if data is logged correctly
              const monthMap = {
                "january": 0, "february": 1, "march": 2, "april": 3,
                "may": 4, "june": 5, "july": 6, "august": 7,
                "september": 8, "october": 9, "november": 10, "december": 11
              };

              function parseDate(blogDate) {
                const [year, monthName, day] = blogDate.split('-');
                return new Date(year, monthMap[monthName.toLowerCase()], day);
              }

              // Sort and get top 3 blogs
              const recentBlogs = data.blogs
                .sort((a, b) => parseDate(b.date) - parseDate(a.date))
                .slice(0, 3);

              // Select container where blog posts will be inserted
              const container = document.getElementById('recent-blogs-container');

              recentBlogs.forEach(blog => {
                const blogHTML = `
                  <div class="block-21 mb-4 d-flex">
                    <a class="blog-img mr-4" style="background-image: url(${blog.image});"></a>
                    <div class="text">
                      <h3 class="heading"><a href="blog-single.html?id=${blog.id}">${blog.title}</a></h3>
                      <div class="meta">
                        <div><a href="#"><span class="icon-calendar"></span> ${blog.date}</a></div>
                        <div><a href="#"><span class="icon-person"></span> Admin</a></div>
                        <div><a href="#"><span class="icon-chat"></span> ${blog.comment_count || 0}</a></div>
                      </div>
                    </div>
                  </div>
              `;
                container.innerHTML += blogHTML;
              });
            })
            .catch(error => console.error('Error loading JSON:', error));

        })
        .catch(error => console.log("Error loading footbar : ", error));
        
      fetch("valuenteer_banner.html")
        .then(response => response.text())
        .then(data => {
          document.getElementById("valuanteer-placeholder").innerHTML = data;
        }).catch(error => console.log("Error loading valuenteer banner : ", error));
    });
  </script>

  <script>

    // Fetch JSON data from projects.json
    fetch('blog_json.json')
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('blog-container');

        data.blogs.forEach(blog => {

          console.log(`blog.title : ${blog.title}`);

          let programmeHTML = `<div class="col-md-4 d-flex ftco-animate">
          	<div class="blog-entry align-self-stretch">
              <a href="blog-single.html?id=${blog.id}" class="block-20" style="background-image: url('${blog.image}');">
              </a>
              <div class="text p-4 d-block">
              	<div class="meta mb-3">`;

          programmeHTML += `<div><a href="#">${blog.date}</a></div>
                            <div><a href="#">${blog.author}</a></div>
                            <div><a href="#" class="meta-chat"><span class="icon-chat"></span> ${blog.comment_count}</a></div>
                            </div>
                            <h3 class="heading mt-3"><a href="#">${blog.title}</a></h3>
                            <p>${blog.description}</p>`;

          programmeHTML += `</div>
                               </div>
                                   </div>`;
          container.innerHTML += programmeHTML;
        });
      })
      .catch(error => {
        console.error('Error fetching the JSON data:', error);
      });

  </script>


  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>

  <!-- Load Bootstrap JS (Choose one, either local or CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <!-- <script -->
  <!-- src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script> -->
  <!-- <script src="js/google-map.js"></script> -->
  <script src="js/main.js"></script>

</body>

</html>